<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diyorbek's IELTS - Reading Comprehension</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --passage-bg: #f8f9fa;
            --questions-bg: #ffffff;
            --border-color: #e0e0e0;
            --highlight-color: springgreen; /* Changed highlight color */
            
            /* New Header & Social Colors */
            --header-bg: #F8F8F8; /* Very light gray for header background */
            --header-text: #333333; /* Dark text for light header */
            --telegram-blue: #0088CC;
            --instagram-pink: #E4405F;
            --youtube-red: #FF0000;

            /* Button Colors (Red themed) */
            --button-bg: #CC0000; /* Primary button red */
            --button-hover: #A30000; /* Darker red on hover */
            
            --correct-color: #28a745; /* Standard green */
            --incorrect-color: #dc3545; /* Standard red */
            --progress-complete: #28a745;
            --progress-incomplete: #bdbdbd;

            /* Timer Colors (Red themed) */
            --timer-bg: #ffebee; /* Very light red/pink */
            --timer-text: #d32f2f; /* Darker red */

            --footer-bg: #f5f5f5;
        }

        .night-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --passage-bg: #1e1e1e;
            --questions-bg: #1e1e1e;
            --border-color: #424242;
            --highlight-color: #2E8B57; /* Darker springgreen for night mode */
            
            /* Night Mode Header & Social Colors */
            --header-bg: #1a1a1a; /* Dark gray for header background */
            --header-text: #ffffff; /* White text for dark header */
            --telegram-blue: #005f99; /* Darker telegram blue */
            --instagram-pink: #b2334b; /* Darker instagram pink */
            --youtube-red: #b20000; /* Darker YouTube red */

            /* Night Mode Button Colors */
            --button-bg: #990000; /* Darker primary button red */
            --button-hover: #7a0000; /* Even darker red on hover */
            
            --correct-color: #218838; /* Darker green */
            --incorrect-color: #c82333; /* Darker red */
            --progress-complete: #218838;
            --progress-incomplete: #616161;

            /* Night Mode Timer Colors */
            --timer-bg: #420000; /* Dark red */
            --timer-text: #ffcdd2; /* Lighter red */

            --footer-bg: #121212;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px; /* Space between social links */
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 8px; /* Space between icon and text */
            color: white; /* Text color is always white for social links */
            padding: 8px 15px;
            border-radius: 50px; /* Pill shape */
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .social-link:hover {
            transform: translateY(-1px);
        }

        .social-link i {
            font-size: 1.2em; /* Makes icon slightly larger than text */
        }

        /* Specific styling for social links */
        .social-link.telegram {
            background-color: var(--telegram-blue);
        }
        .social-link.telegram:hover {
            background-color: #007bb5; /* Slightly darker */
        }

        .social-link.instagram {
            background-color: var(--instagram-pink);
        }
        .social-link.instagram:hover {
            background-color: #d62976; /* Slightly darker */
        }

        .social-link.youtube {
            background-color: var(--youtube-red);
        }
        .social-link.youtube:hover {
            background-color: #CC0000; /* Slightly darker */
        }


        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .timer-container {
            background-color: var(--timer-bg);
            color: var(--timer-text);
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-controls {
            display: flex;
            gap: 8px;
        }

        .timer-controls button {
            background: none;
            border: none;
            color: var(--timer-text);
            cursor: pointer;
            font-size: 16px;
            padding: 4px;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timer-controls button:hover {
            background-color: rgba(0,0,0,0.1); /* Darker hover for light timer */
        }
        .night-mode .timer-controls button:hover {
            background-color: rgba(255,255,255,0.2); /* Lighter hover for dark timer */
        }

        .mode-toggle {
            background: none;
            border: none;
            color: var(--header-text);
            cursor: pointer;
            font-size: 20px;
            padding: 6px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-toggle:hover {
            background-color: rgba(0,0,0,0.1); /* Darker hover for light header */
        }
        .night-mode .mode-toggle:hover {
            background-color: rgba(255,255,255,0.2); /* Lighter hover for dark header */
        }

        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-container, .questions-container {
            height: 100%;
            overflow-y: auto;
            padding: 20px;
        }

        .passage-container {
            width: 50%;
            background-color: var(--passage-bg);
            border-right: 1px solid var(--border-color);
            position: relative;
        }

        .questions-container {
            width: 50%;
            background-color: var(--questions-bg);
        }

        .passage-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .passage-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-color);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .passage-text {
            font-size: 17px;
        }
        
        .question-text {
             font-size: 17px;
             line-height: 1.8; /* Increased line-height for fill-in-the-blank */
        }

        .passage-text p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .highlight {
            background-color: var(--highlight-color);
            cursor: pointer;
        }

        .highlight-tooltip {
            position: absolute;
            background-color: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 25px 0 15px;
            color: var(--text-color);
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .question-group {
            margin-bottom: 30px;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--passage-bg);
            border-left: 4px solid var(--border-color);
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: baseline; /* Align baselines of number and text */
        }

        .question-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background-color: var(--progress-incomplete);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .question.answered .question-number {
            background-color: var(--progress-complete);
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .option input {
            margin-right: 8px;
        }

        /* Styling for the new inline input fields */
        .fill-in-the-blank {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--text-color);
            width: 150px;
            font-family: inherit;
            font-size: 1em; /* Inherit font size from parent */
            color: inherit;
            padding: 0 4px 2px 4px; /* Add some padding */
            margin: 0 3px; /* Add some margin */
            vertical-align: baseline; /* Align with the text */
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }

        .fill-in-the-blank:focus {
            border-bottom-color: var(--button-bg);
        }


        .instructions {
            font-size: 14px;
            color: #757575;
            margin-top: 5px;
            font-style: italic;
        }

        footer {
            background-color: var(--footer-bg);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
        }

        .progress-container {
            display: flex;
            gap: 8px;
        }

        .progress-item {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--progress-incomplete);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .progress-item:hover {
            transform: scale(1.1);
        }

        .progress-item.completed {
            background-color: var(--progress-complete);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }

        .btn-primary {
            background-color: var(--button-bg);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--button-hover);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--button-bg); /* Use primary button color for border */
            color: var(--button-bg); /* Use primary button color for text */
        }

        .btn-secondary:hover {
            background-color: rgba(204, 0, 0, 0.1); /* Light red tint on hover */
        }
        .night-mode .btn-secondary:hover {
            background-color: rgba(153, 0, 0, 0.2); /* Darker red tint on hover for night mode */
        }


        .feedback-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
        }

        .feedback-container {
            background-color: var(--passage-bg);
            width: 90%;
            max-width: 900px;
            height: 90%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }

        .feedback-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .feedback-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #close-feedback {
            font-size: 24px;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
        }

        .score-display {
            font-size: 24px;
            font-weight: 700;
            margin-left: 10px;
        }
        
        .feedback-body {
            padding: 20px;
            overflow-y: auto;
        }

        .feedback-item {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: var(--questions-bg);
        }

        .feedback-question {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .feedback-answer {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 4px;
            background-color: rgba(0,0,0,0.05);
        }

        .correct {
            color: var(--correct-color);
        }

        .incorrect {
            color: var(--incorrect-color);
        }

        .feedback-explanation {
            margin-top: 10px;
            padding: 10px;
            border-left: 3px solid var(--button-bg); /* Use primary button color for explanation border */
            background-color: rgba(0,0,0,0.03);
        }

        .feedback-passage {
            margin-top: 8px;
            font-style: italic;
            color: #757575;
        }

        /* Responsive Design */
        @media (max-width: 900px) {
            main {
                flex-direction: column;
            }
            
            .passage-container, .questions-container {
                width: 100%;
                height: 50%;
            }
            
            .passage-container {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
            
            .progress-container {
                flex-wrap: wrap;
                max-width: 60%;
            }
        }

        @media (max-width: 768px) {
             .logo-area {
                flex-wrap: wrap; /* Allow items to wrap to the next line */
                justify-content: center; /* Center items when wrapped */
                gap: 8px; /* Adjusted gap for smaller screens */
             }
             .social-link {
                padding: 6px 10px; /* Reduced padding for smaller screens */
                font-size: 13px; /* Reduced font size for smaller screens */
             }
             .social-link i {
                font-size: 1.1em; /* Slightly smaller icon */
             }
             .social-link span {
                display: inline; /* Ensure text is visible */
             }
        }


        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }
            .header-controls {
                width: 100%;
                justify-content: space-around;
            }
            .progress-container {
                max-width: 50%;
            }
            .progress-item {
                width: 26px;
                height: 26px;
                font-size: 12px;
            }
            footer {
                flex-direction: column;
                gap: 15px;
            }
            .action-buttons {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-area">
            <!-- Removed the logo image tag as it was not opening -->
            <a href="https://t.me/diyorbeksieltsLC" class="social-link telegram" target="_blank" title="Join on Telegram">
                <i class="fab fa-telegram-plane"></i>
                <span>Diyorbek's IELTS</span>
            </a>
            <a href="https://instagram.com/diyorbeksielts" class="social-link instagram" target="_blank" title="Follow on Instagram">
                <i class="fab fa-instagram"></i>
                <span>Diyorbek's IELTS</span>
            </a>
            <a href="https://youtube.com/@diyorbeksieltslc?si=lF284QTIDSrQsaKN" class="social-link youtube" target="_blank" title="Subscribe on YouTube">
                <i class="fab fa-youtube"></i>
                <span>Diyorbek's IELTS</span>
            </a>
        </div>
        <div class="header-controls">
            <div class="timer-container">
                <i class="fas fa-clock"></i>
                <span id="timer">20:00</span>
                <div class="timer-controls">
                    <button id="start-timer" title="Start"><i class="fas fa-play"></i></button>
                    <button id="pause-timer" title="Pause"><i class="fas fa-pause"></i></button>
                    <button id="reset-timer" title="Reset"><i class="fas fa-redo"></i></button>
                </div>
            </div>
            <button class="mode-toggle" id="night-mode-toggle" title="Toggle Night Mode">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <main>
        <div class="passage-container" id="passage-container">
            <div class="passage-content">
                <div class="passage-title">How tennis rackets have changed</div>
                <div class="passage-text" id="passage-text">
                    <p>In 2016, the British professional tennis player Andy Murray was ranked as the world’s number one. It was an incredible achievement by any standard – made even more remarkable by the fact that he did this during a period considered to be one of the strongest in the sport’s history, competing against the likes of Rafael Nadal, Roger Federer and Novak Djokovic, to name just a few. Yet five years previously, he had been regarded as a talented outsider who entered but never won the major tournaments.</p>
                    <p>Of the changes that account for this transformation, one was visible and widely publicised: in 2011, Murray invited former number one player Ivan Lendl onto his coaching team – a valuable addition that had a visible impact on the player’s playing style. Another change was so subtle as to pass more or less unnoticed. Like many players, Murray has long preferred a racket that consists of two types of string: one for the mains (verticals) and another for the crosses (horizontals). While he continued to use natural string in the crosses, in 2012 he switched to a synthetic string for the mains. A small change, perhaps, but its importance should not be underestimated.</p>
                    <p>The modification that Murray made is just one of a number of options available to players looking to tweak their rackets in order to improve their games. ‘Touring professionals have their rackets customised to their specific needs,’ says Colin Triplow, a UK-based professional racket stringer. ‘It’s a highly important part of performance maximisation.’ Consequently, the specific rackets used by the world’s elite are not actually readily available to the public; rather, each racket is individually made to suit the player who uses it. Take the US professional tennis players Mike and Bob Bryan, for example: ‘We’re very particular with our racket specifications,’ they say. ‘All our rackets are sent from our manufacturer to Tampa, Florida, where our frames go through a . . . thorough customisation process.’ They explain how they have adjusted not only racket length, but even experimented with different kinds of paint. The rackets they use now weigh more than the average model and also have a denser string pattern (i.e. more crosses and mains).</p>
                    <p>The primary reason for these modifications is simple: as the line between winning and losing becomes thinner and thinner, even these slight changes become more and more important. As a result, players and their teams are becoming increasingly creative with the modifications to their rackets as they look to maximise their competitive advantage.</p>
                    <p>Racket modifications mainly date back to the 1970s, when the amateur German tennis player Werner Fischer started playing with the so-called spaghetti-strung racket. It created a string bed that generated so much topspin that it was quickly banned by the International Tennis Federation. However, within a decade or two, racket modification became a regularity. Today it is, in many ways, an aspect of the game that is equal in significance to nutrition or training.</p>
                    <p>Modifications can be divided into two categories: those to the string bed and those to the racket frame. The former is far more common than the latter: the choice of the strings and the tension with which they are installed is something that nearly all professional players experiment with. They will continually change it depending on various factors including the court surface, climatic conditions, and game styles. Some will even change it depending on how they feel at the time.</p>
                    <p>At one time, all tennis rackets were strung with natural gut made from the outer layer of sheep or cow intestines. This all changed in the early 1990s with the development of synthetic strings that were cheaper and more durable. They are made from three materials: nylon (relatively durable and affordable), Kevlar (too stiff to be used alone) or co-polyester (polyester combined with additives that enhance its performance). Even so, many professional players continue to use a ‘hybrid set-up’, where a combination of both synthetic and natural strings are used.</p>
                    <p>Of the synthetics, co-polyester is by far the most widely used. It’s a perfect fit for the style of tennis now played, where players tend to battle it out from the back of the court rather than coming to the net. Studies indicate that the average spin from a co-polyester string is 25% greater than that from natural string or other synthetics. In a sense, the development of co-polyester strings has revolutionised the game.</p>
                    <p>However, many players go beyond these basic adjustments to the strings and make changes to the racket frame itself. For example, much of the serving power of US professional player Pete Sampras was attributed to the addition of four to five lead weights onto his rackets, and today many professionals have the weight adjusted during the manufacturing process.</p>
                    <p>Other changes to the frame involve the handle. Players have individual preferences for the shape of the handle and some will have the handle of one racket moulded onto the frame of a different racket. Other players make different changes. The professional Portuguese player Gonçalo Oliveira replaced the original grips of his rackets with something thinner because they had previously felt uncomfortable to hold.</p>
                    <p>Racket customisation and modification have pushed the standards of the game to greater levels that few could have anticipated in the days of natural strings and heavy, wooden frames, and it’s exciting to see what further developments there will be in the future.</p>
                </div>
            </div>
        </div>
        
        <div class="questions-container" id="questions-container">
            <div class="section-title">Questions 1-7</div>
            <div class="instructions">Do the following statements agree with the information given in Reading Passage 1?</div>
            <div class="instructions">In boxes 1-7 on your answer sheet, write:<br>
                TRUE - if the statement agrees with the information<br>
                FALSE - if the statement contradicts the information<br>
                NOT GIVEN - if there is no information on this
            </div>
            
            <div class="question-group">
                <div class="question" id="q1">
                    <div class="question-title">
                        <div class="question-number">1</div>
                        <div class="question-text">People had expected Andy Murray to become the world's top tennis player for at least five years before 2016.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q1" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
                
                <div class="question" id="q2">
                    <div class="question-title">
                        <div class="question-number">2</div>
                        <div class="question-text">The change that Andy Murray made to his rackets attracted a lot of attention.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q2" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
                
                <div class="question" id="q3">
                    <div class="question-title">
                        <div class="question-number">3</div>
                        <div class="question-text">Most of the world's top players take a professional racket stringer on tour with them.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q3" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
                
                <div class="question" id="q4">
                    <div class="question-title">
                        <div class="question-number">4</div>
                        <div class="question-text">Mike and Bob Bryan use rackets that are light in comparison to the majority of rackets.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q4" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
                
                <div class="question" id="q5">
                    <div class="question-title">
                        <div class="question-number">5</div>
                        <div class="question-text">Werner Fischer played with a spaghetti-strung racket that he designed himself.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q5" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
                
                <div class="question" id="q6">
                    <div class="question-title">
                        <div class="question-number">6</div>
                        <div class="question-text">The weather can affect how professional players adjust the strings on their rackets.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q6" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q6" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q6" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
                
                <div class="question" id="q7">
                    <div class="question-title">
                        <div class="question-number">7</div>
                        <div class="question-text">It was believed that the change Pete Sampras made to his rackets contributed to his strong serve.</div>
                    </div>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q7" value="TRUE"> TRUE
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="FALSE"> FALSE
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="NOT GIVEN"> NOT GIVEN
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="section-title">Questions 8-13</div>
            <div class="instructions">Complete the notes below. Choose ONE WORD ONLY from the passage for each answer.</div>
            
            <div class="question-group">
                <div class="question" id="q8">
                    <div class="question-title">
                        <div class="question-number">8</div>
                        <div class="question-text">Mike and Bob Bryan made changes to the types of<input type="text" name="q8" class="fill-in-the-blank">used on their racket frames.</div>
                    </div>
                </div>
                
                <div class="question" id="q9">
                    <div class="question-title">
                        <div class="question-number">9</div>
                        <div class="question-text">Players were not allowed to use the spaghetti-strung racket because of the amount of<input type="text" name="q9" class="fill-in-the-blank">it created.</div>
                    </div>
                </div>
                
                <div class="question" id="q10">
                    <div class="question-title">
                        <div class="question-number">10</div>
                        <div class="question-text">Changes to rackets can be regarded as being as important as players' diets or the<input type="text" name="q10" class="fill-in-the-blank">they do.</div>
                    </div>
                </div>
                
                <div class="question" id="q11">
                    <div class="question-title">
                        <div class="question-number">11</div>
                        <div class="question-text">All rackets used to have natural strings made from the<input type="text" name="q11" class="fill-in-the-blank">of animals.</div>
                    </div>
                </div>
                
                <div class="question" id="q12">
                    <div class="question-title">
                        <div class="question-number">12</div>
                        <div class="question-text">Pete Sampras had metal<input type="text" name="q12" class="fill-in-the-blank">put into the frames of his rackets.</div>
                    </div>
                </div>
                
                <div class="question" id="q13">
                    <div class="question-title">
                        <div class="question-number">13</div>
                        <div class="question-text">Gonçalo Oliveira changed the<input type="text" name="q13" class="fill-in-the-blank">on his racket handles.</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="progress-container" id="progress-container">
            </div>
        <div class="action-buttons">
            <button class="btn-secondary" id="reset-btn">Reset Answers</button>
            <button class="btn-primary" id="submit-btn">Submit Answers</button>
        </div>
    </footer>

    <div class="feedback-overlay" id="feedback-overlay">
        <div class="feedback-container" id="feedback-container">
            <div class="feedback-header">
                <div class="feedback-title">
                    <i class="fas fa-chart-bar"></i> Your Results
                    <span class="score-display" id="score-display">0/13</span>
                </div>
                <button id="close-feedback" title="Close"><i class="fas fa-times"></i></button>
            </div>
            <div class="feedback-body" id="feedback-body">
                </div>
        </div>
    </div>


    <script>
        // Timer functionality
        let timerInterval;
        let seconds = 1200; // 20 minutes
        let timerRunning = false;
        
        const timerDisplay = document.getElementById('timer');
        const startTimer = document.getElementById('start-timer');
        const pauseTimer = document.getElementById('pause-timer');
        const resetTimer = document.getElementById('reset-timer');
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }
        
        function updateTimer() {
            timerDisplay.textContent = formatTime(seconds);
            if (seconds <= 0) {
                clearInterval(timerInterval);
                timerRunning = false;
                document.getElementById('submit-btn').click();
            }
        }
        
        startTimer.addEventListener('click', () => {
            if (!timerRunning) {
                timerRunning = true;
                timerInterval = setInterval(() => {
                    seconds--;
                    updateTimer();
                }, 1000);
            }
        });
        
        pauseTimer.addEventListener('click', () => {
            if (timerRunning) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        });
        
        resetTimer.addEventListener('click', () => {
            clearInterval(timerInterval);
            timerRunning = false;
            seconds = 1200;
            updateTimer();
        });
        
        // Night mode toggle
        const nightModeToggle = document.getElementById('night-mode-toggle');
        nightModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('night-mode');
            const icon = nightModeToggle.querySelector('i');
            if (document.body.classList.contains('night-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        });
        
        // Create progress indicators
        const progressContainer = document.getElementById('progress-container');
        for (let i = 1; i <= 13; i++) {
            const progressItem = document.createElement('div');
            progressItem.className = 'progress-item';
            progressItem.textContent = i;
            progressItem.dataset.question = i;
            progressContainer.appendChild(progressItem);
            
            progressItem.addEventListener('click', () => {
                const questionElement = document.getElementById(`q${i}`);
                if (questionElement) {
                    questionElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        }
        
        // Text highlighting functionality
        let highlightTooltip = null;

        function handleMouseUp(e) {
            const container = e.currentTarget;
            const selection = window.getSelection();
            if (selection.toString().trim() !== '' && container.contains(selection.anchorNode)) {
                const range = selection.getRangeAt(0);
                const rect = range.getBoundingClientRect();

                if (highlightTooltip) {
                    highlightTooltip.remove();
                    highlightTooltip = null;
                }

                highlightTooltip = document.createElement('div');
                highlightTooltip.className = 'highlight-tooltip';
                highlightTooltip.innerHTML = '<i class="fas fa-highlighter"></i> Highlight';
                highlightTooltip.style.position = 'fixed';
                highlightTooltip.style.top = `${rect.top - 40}px`;
                highlightTooltip.style.left = `${rect.left}px`;
                document.body.appendChild(highlightTooltip);

                highlightTooltip.addEventListener('click', () => {
                    const span = document.createElement('span');
                    span.className = 'highlight';
                    span.appendChild(range.extractContents());
                    range.insertNode(span);
                    selection.removeAllRanges();
                    highlightTooltip.remove();
                    highlightTooltip = null;
                });
            }
        }

        document.getElementById('passage-text').addEventListener('mouseup', handleMouseUp);
        document.getElementById('questions-container').addEventListener('mouseup', handleMouseUp);
        
        document.addEventListener('mousedown', (e) => {
            if (highlightTooltip && !highlightTooltip.contains(e.target)) {
                highlightTooltip.remove();
                highlightTooltip = null;
                window.getSelection().removeAllRanges();
            }
        });
        
        // Track answered questions
        const questions = document.querySelectorAll('.question');
        const progressItems = document.querySelectorAll('.progress-item');
        
        function updateProgress() {
            let answeredCount = 0;
            
            questions.forEach((question, index) => {
                const questionNumber = index + 1;
                let answered = false;
                
                if (questionNumber <= 7) {
                    const selectedOption = question.querySelector('input:checked');
                    answered = selectedOption !== null;
                } else {
                    const input = question.querySelector('input[type="text"]');
                    answered = input.value.trim() !== '';
                }
                
                if (answered) {
                    question.classList.add('answered');
                    progressItems[index].classList.add('completed');
                    answeredCount++;
                } else {
                    question.classList.remove('answered');
                    progressItems[index].classList.remove('completed');
                }
            });
            
            return answeredCount;
        }
        
        document.querySelectorAll('input[type="radio"], input[type="text"]').forEach(input => {
            input.addEventListener('change', updateProgress);
            input.addEventListener('input', updateProgress);
        });
        
        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
            });
            
            document.querySelectorAll('.highlight').forEach(highlight => {
                const parent = highlight.parentNode;
                while (highlight.firstChild) {
                    parent.insertBefore(highlight.firstChild, highlight);
                }
                parent.removeChild(highlight);
                parent.normalize();
            });
            
            updateProgress();
            document.getElementById('feedback-overlay').style.display = 'none';
        });
        
        // Submit and Feedback functionality
        const feedbackOverlay = document.getElementById('feedback-overlay');
        const closeFeedbackBtn = document.getElementById('close-feedback');

        document.getElementById('submit-btn').addEventListener('click', () => {
            console.log("Submit button clicked!"); // Debugging log
            pauseTimer.click();
            
            const answers = {
                1: 'FALSE', 2: 'FALSE', 3: 'NOT GIVEN', 4: 'FALSE', 5: 'NOT GIVEN', 6: 'TRUE', 7: 'TRUE',
                8: 'paint', 9: 'topspin', 10: 'training', 11: 'intestines', 12: 'weights', 13: 'grips'
            };
            
            const explanations = {
                1: "The passage states that five years before 2016 (in 2011), Murray was regarded as a talented outsider who entered but never won major tournaments, so it was not expected that he would become number one.",
                2: "The passage describes Murray's racket change as 'so subtle as to pass more or less unnoticed', meaning it did not attract much attention.",
                3: "The passage mentions a UK-based professional racket stringer but doesn't state whether most top players take one on tour with them.",
                4: "The passage explicitly states that the Bryan brothers' rackets 'weigh more than the average model', so they are not light.",
                5: "The passage mentions that Werner Fischer used a spaghetti-strung racket but doesn't say whether he designed it himself.",
                6: "The passage states that players adjust strings depending on factors including 'climatic conditions', which refers to weather.",
                7: "The passage attributes Sampras' serving power to the weights added to his rackets: 'much of the serving power... was attributed to the addition...'",
                8: "The passage states that the Bryan brothers 'experimented with different kinds of paint' on their rackets.",
                9: "The spaghetti-strung racket was banned because it 'generated so much topspin'.",
                10: "The passage states that racket modification is 'equal in significance to nutrition or training'.",
                11: "Natural gut strings were made 'from the outer layer of sheep or cow intestines'.",
                12: "The passage mentions that Sampras had 'lead weights' added to his rackets.",
                13: "Gonçalo Oliveira 'replaced the original grips of his rackets' with thinner ones."
            };
            
            const passageReferences = {
                1: "Yet five years previously, he had been regarded as a talented outsider who entered but never won the major tournaments.",
                2: "Another change was so subtle as to pass more or less unnoticed.",
                3: "No specific information in the passage.",
                4: "The rackets they use now weigh more than the average model...",
                5: "No specific information in the passage.",
                6: "They will continually change it depending on various factors including the court surface, climatic conditions, and game styles.",
                7: "For example, much of the serving power of US professional player Pete Sampras was attributed to the addition of four to five lead weights onto his rackets...",
                8: "They explain how they have adjusted not only racket length, but even experimented with different kinds of paint.",
                9: "It created a string bed that generated so much topspin that it was quickly banned by the International Tennis Federation.",
                10: "Today it is, in many ways, an aspect of the game that is equal in significance to nutrition or training.",
                11: "At one time, all tennis rackets were strung with natural gut made from the outer layer of sheep or cow intestines.",
                12: "For example, much of the serving power of US professional player Pete Sampras was attributed to the addition of four to five lead weights onto his rackets...",
                13: "The professional Portuguese player Gonçalo Oliveira replaced the original grips of his rackets with something thinner..."
            };
            
            let correctCount = 0;
            const feedbackBody = document.getElementById('feedback-body');
            feedbackBody.innerHTML = ''; 
            
            for (let i = 1; i <= 13; i++) {
                let userAnswer, isCorrect, questionHTML;
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                
                const questionDiv = document.querySelector(`#q${i} .question-text`);

                if (i <= 7) {
                    const selectedOption = document.querySelector(`input[name="q${i}"]:checked`);
                    userAnswer = selectedOption ? selectedOption.value : 'Not answered';
                    isCorrect = userAnswer === answers[i];
                    questionHTML = questionDiv.textContent;
                } else {
                    const input = document.querySelector(`input[name="q${i}"]`);
                    userAnswer = input.value.trim();
                    isCorrect = userAnswer.toLowerCase() === answers[i].toLowerCase();
                    // Recreate the question with the correct answer filled in
                    questionHTML = questionDiv.innerHTML.replace(/<input.*?>/, `<strong><em>${answers[i]}</em></strong>`);
                }
                
                if (isCorrect) correctCount++;
                
                feedbackItem.innerHTML = `
                    <div class="feedback-question">
                        <span class="${isCorrect ? 'correct' : 'incorrect'}">Question ${i}:</span>
                        ${isCorrect ? `<i class="fas fa-check correct" style="margin-left: 5px;"></i>` : `<i class="fas fa-times incorrect" style="margin-left: 5px;"></i>`}
                    </div>
                    <p><em>${questionHTML}</em></p>
                    <div class="feedback-answer">
                        <strong>Your answer:</strong> ${userAnswer || 'Not answered'}<br>
                        ${!isCorrect ? `<strong>Correct answer:</strong> ${answers[i]}` : ''}
                    </div>
                    <div class="feedback-explanation">
                        <strong>Explanation:</strong> ${explanations[i]}
                    </div>
                    <div class="feedback-passage">
                        <strong>Relevant passage:</strong> "${passageReferences[i]}"
                    </div>
                `;
                
                feedbackBody.appendChild(feedbackItem);
            }
            
            document.getElementById('score-display').textContent = `${correctCount}/13`;
            feedbackOverlay.style.display = 'flex'; // This line makes the overlay visible
            console.log("Feedback overlay display set to flex."); // Debugging log
        });

        closeFeedbackBtn.addEventListener('click', () => {
            feedbackOverlay.style.display = 'none';
        });

        feedbackOverlay.addEventListener('click', (e) => {
            if (e.target === feedbackOverlay) {
                feedbackOverlay.style.display = 'none';
            }
        });

        // Initialize timer display and progress
        updateTimer();
        updateProgress();
    </script>
</body>
</html>
